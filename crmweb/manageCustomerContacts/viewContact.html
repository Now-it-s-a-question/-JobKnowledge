<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../layui/css/layui.css" />
	</head>
	<body style="padding: 10px;">
		<!-- <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
		  <legend>常规折叠面板</legend>
		</fieldset> -->
		<div class="layui-collapse" lay-filter="test">
			<div class="layui-colla-item">
				<h2 class="layui-colla-title">联系人一：联系人姓名1 / 联系人编号</h2>
				<div class="layui-colla-content">
					<p>有不少其他答案说是因为JS太差。我下面的答案已经说了，这不是根本性的原因。但除此之外，我还要纠正一些对JS具体问题的误解。JS当初是被作为脚本语言设计的，所以某些问题并不是JS设计得差或者是JS设计者的失误。比如var的作用域问题，并不是“错误”，而是当时绝大部分脚本语言都是这样的，如perl/php/sh等。模块的问题也是，脚本语言几乎都没有模块/命名空间功能。弱类型、for-in之类的问题也是，只不过现在用那些老的脚本语言的人比较少，所以很多人都误以为是JS才有的坑。另外有人说JS是半残语言，满足不了开发需求，1999年就该死。半残这个嘛，就夸张了。JS虽然有很多问题，但是设计总体还是优秀的。——来自知乎@贺师俊</p>
				</div>
			</div>
			<div class="layui-colla-item">
				<h2 class="layui-colla-title">联系人二：联系人姓名2 / 联系人编号</h2>
				<div class="layui-colla-content">
					<form class="layui-form" action="">
						<div class="layui-form-item">
							<label class="layui-form-label">联系人姓名</label>
							<div class="layui-input-block">
								<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">联系人编号</label>
							<div class="layui-input-block">
								<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">联系人电话</label>
							<div class="layui-input-block">
								<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">联系人职位</label>
							<div class="layui-input-block">
								<select name="city" class="layui-select-contacts" lay-verify="required">
									<option value="">请选择</option>
									<option value="0">置业实习</option>
									<option value="1">置业精英</option>
									<option value="2">置业月冠军</option>
									<option value="3">置业王者</option>
								</select>
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">联系人性别</label>
							<div class="layui-input-block" style="height: 36px;line-height: 36px;">
								<input type="radio" class="layui-radio-sex" name="sex" value="男" title="男" checked>
								<input type="radio" class="layui-radio-sex" name="sex" value="女" title="女">
							</div>
						</div>
						<div class="layui-form-item layui-form-text">
							<label class="layui-form-label">备注</label>
							<div class="layui-input-block">
								<textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
							</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-input-block" style="position: relative;">
								<button type="button" style="float: left;" class="layui-btn layui-btn-normal" id="edit">编辑</button>
								<button class="layui-btn" id="btn" style="display: none;float: left;" lay-submit lay-filter="formDemo">立即提交</button>
								<button type="button" id="cancel" style="display: none;float: left;" class="layui-btn layui-btn-primary">取消</button>
								<button type="button" id="del" style="float: left;" class="layui-btn layui-btn-danger">删除</button>
							</div>
						</div>
					</form>
				</div>
			</div>
			<div style="position: relative; width: 100%;height: 38px;line-height: 38px;margin: auto;">
				<div style="width: 200px;border: 1px solid #C9C9C9;height: 38px;width: 180px;margin: auto;background-color: #f2f2f2;">
					<i class="layui-icon" style="float: left;height: 30px;width: 30px;margin-left: 40px;">&#xe624;</i>
					<p style="float: left;">增加联系人</p>
				</div>
			</div>
		</div>

		<script src="../layui/layui.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			layui.use(['element', 'table', 'layer', 'form'], function() {
				var element = layui.element;
				var $ = layui.jquery
				var layer = layui.layer;
				var table = layui.table;
				var form = layui.form;

				//表单不可编辑
				$('.layui-input').attr('disabled', 'true');
				$('.layui-select-contacts').attr('disabled', 'true');
				$('.layui-radio-sex').attr('disabled', 'true');
				$('.layui-textarea').attr('disabled', 'true');
				// $('.layui-form').attr('readonly','true');
				//监听编辑
				$('#edit').click(function() {
					console.log("点击编辑");
					//表单可编辑
					$('.layui-input').removeAttr('disabled');
					$('.layui-select-contacts').removeAttr('disabled');
					$('.layui-radio-sex').removeAttr('disabled');
					$('.layui-textarea').removeAttr('disabled');
					$('#edit').css('display', 'none');
					$('#btn').css('display', 'block');
					$('#cancel').css('display', 'block');
					$('#del').css('display', 'none');
				})
				//监听取消
				$('#cancel').click(function() {
					console.log("取消编辑");
					//表单不可编辑
					$('.layui-input').attr('disabled', 'true');
					$('.layui-select-contacts').attr('disabled', 'true');
					$('.layui-radio-sex').attr('disabled', 'true');
					$('.layui-textarea').attr('disabled', 'true');
					$('#edit').css('display', 'block');
					$('#btn').css('display', 'none');
					$('#cancel').css('display', 'none');
					$('#del').css('display', 'block');
					form.render();
				})
				//监听删除
				$('#del').click(function() {

					// $('#del').css('display','block');
					layer.confirm('确认要删除选中的这行吗？', function(index) {
						var ids = []
						for (var i = 0; i < checkStatus.data.length; i++) {
							ids.push(checkStatus.data[i].cusNo)
						}

						$.ajax({
							url: 'http://localhost:8080/customer/delCustomer',
							type: 'POST',
							dataType: 'JSON',
							data: {
								ids: ids.join(",")
							},
							success: function(obj) {
								layer.msg(obj.msg);
								table.reload('tabCustomer')
							}
						})

						layer.close(index);
					});
				})
				//监听提交
				form.on('submit(formDemo)', function(data) {
					lauer.msg('点击提交了');
					layer.msg(JSON.stringify(data.field));
					return false;
				});

				//监听折叠
				element.on('collapse(test)', function(data) {
					// layer.msg('展开状态：' + data.show);
				});

				table.render({
					elem: '#tabManageCustomer',
					height: 'full-150',
					url: 'http://localhost:8080/contact/contacts',
					// url: 'manageCustomerContacts/manageCustomerContactsData.json', //数据接口
					page: true, //开启分页
					method: 'get',
					toolbar: '#barCustomer', //添加编辑工具栏按钮
					defaultToolbar: [], //去掉默认的工具栏按钮
					limits: [5, 10, 15, 20],
					limit: 5,
					cols: [
						[ //表头
							{
								checkbox: true
							},
							{
								field: 'cusNo',
								title: '客户编号',
								width: 100
							},
							// {
							{
								field: 'operation',
								title: '联系人',
								width: 100,
								toolbar: '#operationBarCustomer'
							}
						]
					]
				});

			});
		</script>
	</body>
</html>

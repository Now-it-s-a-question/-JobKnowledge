<div>
	<table id="tabManageCustomer" lay-filter="tabManageCustomer">
	</table>
</div>
<script type="text/html" id="barCustomer">
	<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
	  <input type="text" id="cusName" autocomplete="off" placeholder="请输入客户姓名查询" style="margin-left: 200px;">
	  <a class="layui-btn  layui-btn-xs" lay-event="search">搜索</a>
</script>
<script type="text/html" id="operationBarCustomer">
	<a class="layui-btn layui-btn-xs" lay-event="see">查看</a>
</script>
<script>
	var row = null
	var table = null
	layui.use(['table', 'jquery'], function() {
		table = layui.table;
		lauer = layui.layer;
		var $ = layui.jquery;
		// debugger;
		//第一个实例
		table.render({
			elem: '#tabManageCustomer',
			height: 'full-150',
			url: 'http://localhost:8080/contact/contacts',
			// url: 'manageCustomerContacts/manageCustomerContactsData.json', //数据接口
			page: true, //开启分页
			method:'get',
			toolbar: '#barCustomer', //添加编辑工具栏按钮
			defaultToolbar: [], //去掉默认的工具栏按钮
			limits: [5, 10, 15, 20],
			limit: 5,
			cols: [
				[ //表头
					{checkbox: true},
					{field: 'cusNo',title: '客户编号',width: 100},
					// {
					// 	field: 'cusName',
					// 	title: '客户名称',
					// 	width: 100
					// },
					// {
					// 	field: 'cusSex',
					// 	title: '性别',
					// 	width: 100
					// },
					// {
					// 	field: 'position',
					// 	title: '销售主管',
					// 	width: 100
					// },
					// {
					// 	field: 'cusLevel',
					// 	title: '客户等级',
					// 	width: 100
					// },
					// {
					// 	field: 'cusCredit',
					// 	title: '信用等级',
					// 	templet: function(item) {
					// 		if (item.cusCredit === '一级') {
					// 			return '一等'
					// 		} else {
					// 			return item.cusCredit
					// 		}
					// 	},
					// 	width: 100
					// },
					// {
					// 	field: 'contacts',
					// 	title: '联系人',
					// 	width: 100
					// },
					{field: 'operation',title: '操作',width: 100,tool: '#operationBarCustomer'
					}
				]
			]
		});


		//操作编辑工具监听事件
		// table.on('tool(tabManageCustomer)', function(obj) {
		// 	var checkStatus = table.checkStatus(obj.config.id);
		// 	switch (obj.event) {
		// 		//点击查看
		// 		case 'see':
		// 			// debugger;
		// 			layer.msg("hello");
				
				
		// 	};
		// });
		
		//监听行工具事件
		  table.on('tool(tabManageCustomer)', function(obj){ //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
		    var data = obj.data //获得当前行数据
		    ,layEvent = obj.event; //获得 lay-event 对应的值
		    if(layEvent === 'see'){
		      layer.msg('查看操作');
		    } 
			// else if(layEvent === 'del'){
		 //      layer.confirm('真的删除行么', function(index){
		 //        obj.del(); //删除对应行（tr）的DOM结构
		 //        layer.close(index);
		 //        //向服务端发送删除指令
		 //      });
		 //    } else if(layEvent === 'edit'){
		 //      layer.msg('编辑操作');
		 //    }
		  });

		//总编辑工具监听事件
		table.on('toolbar(tabManageCustomer)', function(obj) {
			var checkStatus = table.checkStatus(obj.config.id);
			switch (obj.event) {
				//点击查看
				case 'see':
				// debugger;
					layer.msg("hello");
				break;
					//删除
				case 'del':
				// 	if (checkStatus.data.length <= 0) {
				// 		layer.alert("请选择要删除的行");
				// 		return;
				// 	}
				// 	layer.confirm('确认要删除选中的这行吗？', function(index) {
				// 		var ids = []
				// 		for (var i = 0; i < checkStatus.data.length; i++) {
				// 			ids.push(checkStatus.data[i].cusNo)
				// 		}

				// layer.msg("删除");
				// 		// $.ajax({
				// 		// 	url: 'http://localhost:8080/customer/delCustomer',
				// 		// 	type: 'POST',
				// 		// 	dataType: 'JSON',
				// 		// 	data: {
				// 		// 		ids: ids.join(",")
				// 		// 	},
				// 		// 	success: function(obj) {
				// 		// 		layer.msg(obj.msg);
				// 		// 		table.reload('tabManageCustomer')
				// 		// 	}
				// 		// })

				// 		// layer.close(index);
				// 	});
				layer.msg("删除");

					break;
				//搜索
				case 'search':
				Layer.msg('a');
					// table.reload('tabManageCustomer', {
					// 	where: {
					// 		cusName: $("#cusName").val()
					// 	},
					// 	page: {
					// 		curr: 1
					// 	}
					// })
					// break;
			};
		});


	});
</script>
